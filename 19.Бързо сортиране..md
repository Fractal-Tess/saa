_Бързо сортиране. Стратегии за разделяне. Избор на разделящ елемент. Примери._

# Бързо сортиране: Стратегии за разделяне и избор на разделящ елемент

**Бързото сортиране** (на английски: Quick Sort) е един от най-ефективните и широко използвани алгоритми за сортиране. Той се основава на принципа "разделяй и владей" (divide and conquer), което означава, че проблемът се разбива на по-малки подпроблеми, които се решават поотделно. Основната стъпка в бързото сортиране е **разделянето на масива** на две части спрямо избран **разделящ елемент** (pivot). В тази статия ще разгледаме различни стратегии за избор на разделящ елемент и ще илюстрираме процеса с примери.

---

## Стратегии за разделяне

Целта на разделянето е да се прегрупират елементите на масива така, че:
- Всички елементи **по-малки** от разделящия елемент да се намират **вляво** от него.
- Всички елементи **по-големи** от разделящия елемент да се намират **вдясно** от него.

След разделянето, разделящият елемент се намира на правилната си позиция в сортирания масив. Този процес се повтаря рекурсивно за лявата и дясната част на масива.

---

## Избор на разделящ елемент

Изборът на разделящ елемент е критичен за ефективността на алгоритъма. Лошият избор може да доведе до неефективно разделяне и влошаване на производителността. Ето някои често използвани стратегии:

### 1. **Избор на първия елемент**
   - Разделящият елемент е първият елемент от масива.
   - **Предимства**: Лесен за имплементация.
   - **Недостатъци**: Ако масивът е вече сортиран или почти сортиран, производителността се влошава до O(n²).
   - **Пример**:
     ```plaintext
     Масив: [8, 3, 10, 1, 6]
     Разделящ елемент: 8
     След разделяне: [3, 1, 6, 8, 10]
     ```

### 2. **Избор на последния елемент**
   - Разделящият елемент е последният елемент от масива.
   - **Предимства**: Също лесен за имплементация.
   - **Недостатъци**: Подобен на избора на първия елемент, рискува лоша производителност при сортирани мави.
   - **Пример**:
     ```plaintext
     Масив: [7, 2, 5, 1, 9]
     Разделящ елемент: 9
     След разделяне: [7, 2, 5, 1, ]
     ```

### 3. **Избор на среден елемент**
   - Разделящият елемент е средният елемент на масива.
   - **Предимства**: Намалява вероятността от лоша производителност при частично сортирани масиви.
   - **Недостатъци**: Изисква допълнителни изчисления за намиране на средния елемент.
   - **Пример**:
     ```plaintext
     Масив: [4, 6, 2, 5, 3]
     Разделящ елемент: 2 (среден елемент)
     След разделяне: [2, 3, 4, 5, 6]
     ```

### 4. **Избор на случаен елемент**
   - Разделящият елемент се избира на случаен принцип.
   - **Предимства**: Намалява вероятността от лоша производителност, тъй като изборът е непредсказуем.
   - **Недостатъци**: Изисква генератор на случайни числа, което може да увеличи сложността.
   - **Пример**:
     ```plaintext
     Масив: [9, 4, 7, 2, 5]
     Разделящ елемент: 7 (избран на случаен принцип)
     След разделяне: [4, 2, 5, 7, 9]
     ```

### 5. **Медиана от три**
   - Разделящият елемент е медианата на първия, средния и последния елемент.
   - **Предимства**: Балансира ефективността и лекотата на избор.
   - **Недостатъци**: Изисква допълнителни сравнения.
   - **Пример**:
     ```plaintext
     Масив: [10, 2, 8, 5, 7]
     Първи елемент: 10, Среден елемент: 8, Последен елемент: 7
     Медиана: 8
     След разделяне: [2, 5, 7, 8, 10]
     ```

---

## Пример за пълно изпълнение на бързо сортиране

Нека разгледаме пример с масив `[3, 6, 8, 10, 1, 2, 1]` и избор на разделящ елемент като **последния елемент**.

1. **Първо разделяне**:
   - Разделящ елемент: `1` (последен елемент).
   - След разделяне: `[1, 1, 2, 3, 6, 8, 10]`.
   - Лява част: `[1]`, дясна част: `[2, 3, 6, 8, 10]`.

2. **Рекурсивно сортиране на дясната част**:
   - Разделящ елемент: `10` (последен елемент).
   - След разделяне: `[2, 3, 6, 8, 10]`.
   - Лява част: `[2, 3, 6, 8]`, дясна част: `[]`.

3. **Рекурсивно сортиране на лявата част**:
   - Разделящ елемент: `8` (последен елемент).
   - След разделяне: `[2, 3, 6, 8]`.
   - Лява част: `[2, 3, 6]`, дясна част: `[]`.

4. **Рекурсивно сортиране на лявата част**:
   - Разделящ елемент: `6` (последен елемент).
   - След разделяне: `[2, 3, 6]`.
   - Лява част: `[2, 3]`, дясна част: `[]`.

5. **Рекурсивно сортиране на лявата част**:
   - Разделящ елемент: `3` (последен елемент).
   - След разделяне: `[2, 3]`.
   - Лява част: `[2]`, дясна част: `[]`.

6. **Краен резултат**:
   - Сортиран масив: `[1, 1, 2, 3, 6, 8, 10]`.

---

## Заключение

Бързото сортиране е мощен алгоритъм, чиято ефективност зависи от стратегията за избор на разделящ елемент. Докато простите стратегии като избор на първия или последния елемент са лесни за имплементация, те могат да доведат до лоша производителност в специфични случаи. По-сложни стратегии като медиана от три или случаен избор предлагат по-добър баланс между ефективност и лекота на използване. Разбирането на тези стратегии е ключово за оптималното прилагане на бързото сортиране в реални задачи.
